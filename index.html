<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مكتب ناصر المانع - نظام الحجز الذكي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* التنسيق الزجاجي الفخم */
        :root { --gold: #c5a059; --dark: #0f172a; }
        body { background: radial-gradient(circle at top, #1e293b, #0f172a); font-family: 'Segoe UI', sans-serif; margin: 0; color: white; display: flex; justify-content: center; padding: 20px; }
        .container { width: 100%; max-width: 400px; text-align: center; }
        .profile-img { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--gold); margin-bottom: 10px; background: white; padding: 5px; }
        
        /* حاوية الخدمات الديناميكية */
        .links-grid { display: flex; flex-direction: column; gap: 12px; margin: 20px 0; }
        .btn-link { background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; display: flex; align-items: center; color: white; text-decoration: none; transition: 0.3s; }
        .btn-link:hover { background: rgba(255,255,255,0.15); border-color: var(--gold); transform: translateY(-2px); }
        .btn-link i { font-size: 20px; margin-left: 15px; color: var(--gold); }

        /* نموذج الحجز */
        .booking-card { background: rgba(255,255,255,0.02); border: 1px dashed rgba(255,255,255,0.2); padding: 20px; border-radius: 20px; }
        input, select, textarea { width: 100%; padding: 12px; margin-bottom: 10px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; color: white; box-sizing: border-box; outline: none; }
        #submitBtn { width: 100%; padding: 15px; background: var(--gold); color: var(--dark); border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .loading { font-style: italic; opacity: 0.7; }
    </style>
</head>
<body>

<div class="container">
    <img src="https://ui-avatars.com/api/?name=NM&background=c5a059&color=fff" class="profile-img">
    <h2>مكتب ناصر المانع للعقارات</h2>
    
    <div id="services-container" class="links-grid">
        <p class="loading">جاري تحميل أحدث الخدمات...</p>
    </div>

    <div class="booking-card">
        <h4 style="color:var(--gold)">احجز موعدك الآن</h4>
        <form id="bookingForm">
            <input type="text" name="name" placeholder="الاسم الكريم" required>
            <input type="tel" name="phone" placeholder="رقم الجوال" required>
            <select name="service" id="serviceSelect">
                <option value="معاينة عامة">اختر نوع الخدمة</option>
            </select>
            <button type="submit" id="submitBtn">تأكيد الحجز</button>
        </form>
        <p id="successMsg" style="display:none; color:#4ade80;">✅ تم استلام طلبك بنجاح!</p>
    </div>
</div>

<script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxLAx4mUMLBTcjevVIC-DVnyenWmylTuq3UHoJFrgSzutRv3xYrdki8BKy3NT0iBbzQ/exec';

    // 1. جلب الخدمات وعرضها
    window.onload = () => {
        fetch(SCRIPT_URL)
        .then(res => res.json())
        .then(data => {
            const container = document.getElementById('services-container');
            const select = document.getElementById('serviceSelect');
            container.innerHTML = '';
            
            data.forEach(item => {
                // إضافة زر للموقع
                container.innerHTML += `
                    <a href="${item.link || '#'}" class="btn-link">
                        <i class="fas fa-star"></i>
                        <div style="text-align:right">
                            <div style="font-weight:bold">${item.name}</div>
                            <div style="font-size:11px; opacity:0.6">${item.desc}</div>
                        </div>
                    </a>`;
                // إضافة خيار في نموذج الحجز تلقائياً
                select.innerHTML += `<option value="${item.name}">${item.name}</option>`;
            });
        });
    };

    // 2. إرسال المواعيد
    const form = document.getElementById('bookingForm');
    form.addEventListener('submit', e => {
        e.preventDefault();
        document.getElementById('submitBtn').disabled = true;
        fetch(SCRIPT_URL, { method: 'POST', body: new FormData(form) })
        .then(() => {
            form.reset();
            form.style.display = 'none';
            document.getElementById('successMsg').style.display = 'block';
        });
    });
</script>

</body>
</html>
